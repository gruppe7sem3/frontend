<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Kino Biografen</title>
 <!-- Bootstrap CSS -->
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css">
 <!-- Bootstrap JS -->
 <script src="https://cdn.jsdelivr.net/npm/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
 <link rel="stylesheet" href="styles.css">
 <style>
  




   .container-black {
     position: relative; /* Ensure relative positioning for absolute children */
   }
 
   .slideshow-container {
     position: relative; /* Ensure relative positioning */
     text-align: center;
   }
 
   .text-over-slideshow {
     position: absolute; /* Position absolute for overlay */
     top: 50%; /* Adjust the top position as needed */
     left: 50%; /* Adjust the left position as needed */
     transform: translate(-50%, -50%); /* Center the text */
     z-index: 2; /* Ensure text is above the slideshow */
     text-align: center; /* Optional: Center-align text */
     background: rgba(0, 0, 0, 0.5); /* Optional: Add a semi-transparent background */
     padding: 20px; /* Optional: Add padding to the text */
   }




   /* Style for movie cards */
   .movie-card {
     background-color: #222;
     color: white;
     padding: 20px;
     margin-bottom: 20px;
     display: flex;
     justify-content: space-between;
     align-items: center;
   }




   .poster-image {
     width: 30%;
   }




   .movie-details {
     width: 65%;
   }




   .show-times {
     list-style: none;
     padding: 0;
   }




   .show-time-item {
     margin: 5px 0;
   }
 </style>
</head>
<body>
 <!-- Placeholder for the navbar -->
 <div id="navbar-placeholder"></div>










 <!-- Movie Schedule -->
 <div class="container my-5" id="movie-container">
   <h1>Program</h1>
   <div class="row" id="movie-cards">
     <!-- Movie Cards will be generated here -->
   </div>
 </div>






 <!-- Include jQuery (you may need to download it or use a CDN) -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>




 <!-- Load the navbar using jQuery -->
 <script>
   $(function() {
     $('#navbar-placeholder').load('navbar.html');
   });
 </script>




 <!-- JavaScript to fetch and display movies -->
<!-- JavaScript to fetch and display movies -->
<script>
 // Function to fetch JSON data from your API
 function fetchMovies() {
   fetch('http://localhost:2222/shows')
     .then((response) => response.json())
     .then((data) => {
       const movieContainer = document.getElementById('movie-cards');
       const groupedMovies = groupMoviesByPoster(data);




       // Loop through the grouped movies
       for (const posterUrl in groupedMovies) {
         const movies = groupedMovies[posterUrl];




         // Create a movie card for the poster
         const movieCard = createMovieCard(posterUrl, movies);
         movieContainer.appendChild(movieCard);
       }
     })
     .catch((error) => {
       console.error('Error fetching data:', error);
     });
 }




 // Helper function to group movies by poster URL
 function groupMoviesByPoster(movies) {
   const grouped = {};
   movies.forEach((movie) => {
     if (!grouped[movie.poster]) {
       grouped[movie.poster] = [];
     }
     grouped[movie.poster].push(movie);
   });
   return grouped;
 }




 // Helper function to create a movie card
 function createMovieCard(posterUrl, movies) {
   const cardDiv = document.createElement('div');
   cardDiv.classList.add('col-md-12', 'mb-4');




   const card = document.createElement('div');
   card.classList.add('movie-card');




   // Create an image for the poster
   const img = document.createElement('img');
   img.src = posterUrl;
   img.classList.add('poster-image');




   // Create a div for movie details (title and show times)
   const movieDetailsDiv = document.createElement('div');
   movieDetailsDiv.classList.add('movie-details');




   // Create a list to display show times
   const showTimesList = document.createElement('ul');
   showTimesList.classList.add('show-times');




   // Add individual movie show times to the list
   movies.forEach((movie) => {
     const movieShowTime = createShowTimeListItem(movie);
     showTimesList.appendChild(movieShowTime);
   });




   // Append elements to build the movie card
   movieDetailsDiv.appendChild(showTimesList);
   card.appendChild(img);
   card.appendChild(movieDetailsDiv);
   cardDiv.appendChild(card);




   return cardDiv;
 }




 // Helper function to create a list item for movie show time
 function createShowTimeListItem(movie) {
 const listItem = document.createElement('li');
 listItem.classList.add('show-time-item');
 const link = document.createElement('a');




 // Parse the showDate and showTime values
 const showDateTime = new Date(movie.showTime);
 const formattedTime = showDateTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });




 // Check if the show has hall = 2
 if (movie.hallId === 2) {
   link.href = `seatSelector2.html?showId=${movie.showId}`;
 } else {
   link.href = `seatSelector.html?showId=${movie.showId}`;
 }




 link.textContent = `${movie.showDate} - ${formattedTime}`;
 listItem.appendChild(link);




 return listItem;
}




 // Call the function to fetch and display movies
 fetchMovies();
</script>




</body>
</html>